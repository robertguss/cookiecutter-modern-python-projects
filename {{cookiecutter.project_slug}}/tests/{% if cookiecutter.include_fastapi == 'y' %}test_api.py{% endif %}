{% if cookiecutter.include_fastapi == 'y' -%}
import pytest
from {{ cookiecutter.project_slug }} import __version__


def test_root_endpoint(client):
    response = client.get("/")
    assert response.status_code == 200
    data = response.json()
    assert "message" in data
    assert "version" in data
    assert data["version"] == __version__


def test_health_endpoint(client):
    response = client.get("/health")
    assert response.status_code == 200
    data = response.json()
    assert data["status"] == "healthy"
    assert data["version"] == __version__


def test_openapi_docs():
    from {{ cookiecutter.project_slug }}.api import app
    
    assert app.title == "{{ cookiecutter.project_name }}"
    assert app.description == "{{ cookiecutter.project_description }}"
    assert app.version == __version__
{% endif %}
